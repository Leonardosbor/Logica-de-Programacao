<!DOCTYPE html>
<html lang="ptbr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fluxo de Dados</title>
</head>
<body>
    <form id="form">
        <input type="text" id="inputArea" placeholder="Insira um item">
        <button id="button">Adicionar</button>
    </form>

    <ul id="listItem"></ul>

    <script>
        const input = document.getElementById('inputArea');
        const btn = document.getElementById('button');
        const list = document.getElementById('listItem');
        const form = document.getElementById('form');

        let tasks = [
            {text: 'Lavar a louça', completed: false},
            {text: 'Limpar areia dos gatinhos', completed: false},
            {text: 'Fazer almoço', completed: true},
            {text: 'Lavar roupa', completed: true},
            {text: 'Pagar as contas', completed: true},
        ];


        function renderTask() {
            list.innerHTML = '';

            tasks.forEach((task, index) => {
                const newElement = document.createElement('li');
                newElement.textContent = `${task.text}`;

                if (task.completed) {
                    newElement.style.textDecoration = 'line-through';
                    newElement.style.color = 'red'
                }

                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'X'
                deleteButton.classList.add('delete-button');
                deleteButton.dataset.index = index;

                newElement.appendChild(deleteButton);
                list.appendChild(newElement);
            })
        }


        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const addedItem = input.value.trim();

            if (addedItem) {
                tasks.push({text: addedItem, completed: false})
            };

            renderTask();
            input.focus();
            input.value = '';

        })
        

        list.addEventListener('click', (e) => {
            if (e.target.classList.contains('delete-button')) {
                const indexToRemove = parseInt(e.target.dataset.index)
                tasks.splice(indexToRemove, 1);
                renderTask();
            };


        })

        renderTask();
    </script>
</body>
</html>